# MemBook (Intentful Transactions)

MemSwap is built atop MemBook, a protocol that formalizes intentful transactions.

## What is an intentful transaction?

An intentful transaction is a transaction that embeds a user's intent. Practically, a user, expecting an intent to be fulfilled, may embed the conditions of their intent inside a transaction’s calldata.

Imagine that a user has the following intent:

EXAMPLE INTENT

This intent can be hashed and appended to any transactions calldata. We hash the intent as follows:

EXAMPLE hash

and append the hash to the transactions call data. You can see an example append here:

[example transaction](https://goerli.etherscan.io/tx/0x3214273fa15ce600057299dfc02e881c2896bce1f7005480dd2b4aa2d9d47b15) - This approval transaction calls the depositAndApprove method, with the intent appended in the calldata.

## How does MemSwap leverage intentful transactions?

In the case of MemSwap, intents are embedded into approval transactions for the tokens required in the swap (or transfers for Eth swaps).

Solvers may then parse intents from the ethereum mempool and submit bundles to block builders or matchmakers once they can fulfill the conditions of the intent. We describe the specifics of intentful transactions in MemSwap, this mechanism could be used for a variety of intent types.

### MemSwap Intents

Swap intents in memswap are dutch auctions, similar to uniswapX and conform to the EIP-712 order standard. An example swap intent in MemSwap may be as follows:

EXAMPLE INTENT

### Why dutch auctions?

The goal of having an auction mechanic is that, as the price decays, searchers gain access to fill the intent at a sequentially lower price. This is a forcing function to get searchers to fill at the best possible price. The auction price must decay as a function of blocks. To explore this further we walk through an exemplary MemSwap:

2. Alice wishes to swap 1 Eth for USDC using MemSwap. Alice submits a transaction transferring 1Eth to MemSwap with the intent to get a maximum quantity of USDC with a lower bound of 1791, with a 0.5% decay over two blocks.

3. In block t, Alice’s intent can only be fulfilled if a solver can provide 1809 USDC to Alice. No such route exists.

4. In block t + 1, Alice’s intent can only be fulfilled if the route can provide 1800 USDC to Alice. A searcher finds a route to fulfill this intent, and submits the bundle to a block builder. Since there is only one bundle using this route, the entire market benefit is internalized by Alice (minus the solver’s fee).

BLOCK vs. PRICE and Fill Example GRAPH
